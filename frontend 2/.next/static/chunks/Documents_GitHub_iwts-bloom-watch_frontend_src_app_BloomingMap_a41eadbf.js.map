{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/htanphuc/Documents/GitHub/iwts-bloom-watch/frontend/src/app/BloomingMap.js"],"sourcesContent":["\"use client\";\nimport { useEffect, useRef } from \"react\";\nimport mapboxgl from \"mapbox-gl\";\n\n// ⚠️ Replace this with your actual Mapbox access token\nmapboxgl.accessToken = \"pk.eyJ1Ijoic3VubnkxNzMiLCJhIjoiY21nOWtwM2h2MDd4bjJpb3B3MGV4bXYyMyJ9.a1NLLN95JZ8EbhL8LJ-2VQ\";\n\nexport default function BloomingMap() {\n  const mapContainer = useRef(null);\n  const mapRef = useRef(null);\n\n  // Example NDVI data\n  const regions = [\n    { id: 1, name: \"Tokyo\", lat: 35.6895, lng: 139.6917, ndvi: 0.75 },\n    { id: 2, name: \"Paris\", lat: 48.8566, lng: 2.3522, ndvi: 0.55 },\n    { id: 3, name: \"New York\", lat: 40.7128, lng: -74.006, ndvi: 0.3 },\n  ];\n\n  const getColor = (ndvi) => {\n    if (ndvi > 0.7) return \"#22c55e\"; // green\n    if (ndvi > 0.5) return \"#eab308\"; // yellow\n    return \"#ef4444\"; // red\n  };\n\n  useEffect(() => {\n    if (mapRef.current || !mapContainer.current) return;\n\n    const map = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: \"mapbox://styles/mapbox/light-v11\",\n      center: [0, 20],\n      zoom: 1.5,\n    });\n\n    mapRef.current = map;\n\n    // Add markers\n    regions.forEach((r) => {\n      new mapboxgl.Marker({\n        element: (() => {\n          const el = document.createElement(\"div\");\n          el.style.width = \"20px\";\n          el.style.height = \"20px\";\n          el.style.borderRadius = \"50%\";\n          el.style.backgroundColor = getColor(r.ndvi);\n          el.style.opacity = \"0.6\";\n          el.style.border = \"2px solid white\";\n          return el;\n        })(),\n      })\n        .setLngLat([r.lng, r.lat])\n        .setPopup(\n          new mapboxgl.Popup().setHTML(\n            `<strong>${r.name}</strong><br/>NDVI: ${r.ndvi}`\n          )\n        )\n        .addTo(map);\n    });\n\n    return () => {\n      map.remove();\n    };\n  }, []);\n\n  return <div ref={mapContainer} className=\"w-full h-screen\" />;\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;;;AAFA;;;AAIA,uDAAuD;AACvD,+NAAQ,CAAC,WAAW,GAAG;AAER,SAAS;;IACtB,MAAM,eAAe,IAAA,oOAAM,EAAC;IAC5B,MAAM,SAAS,IAAA,oOAAM,EAAC;IAEtB,oBAAoB;IACpB,MAAM,UAAU;QACd;YAAE,IAAI;YAAG,MAAM;YAAS,KAAK;YAAS,KAAK;YAAU,MAAM;QAAK;QAChE;YAAE,IAAI;YAAG,MAAM;YAAS,KAAK;YAAS,KAAK;YAAQ,MAAM;QAAK;QAC9D;YAAE,IAAI;YAAG,MAAM;YAAY,KAAK;YAAS,KAAK,CAAC;YAAQ,MAAM;QAAI;KAClE;IAED,MAAM,WAAW,CAAC;QAChB,IAAI,OAAO,KAAK,OAAO,WAAW,QAAQ;QAC1C,IAAI,OAAO,KAAK,OAAO,WAAW,SAAS;QAC3C,OAAO,WAAW,MAAM;IAC1B;IAEA,IAAA,uOAAS;iCAAC;YACR,IAAI,OAAO,OAAO,IAAI,CAAC,aAAa,OAAO,EAAE;YAE7C,MAAM,MAAM,IAAI,+NAAQ,CAAC,GAAG,CAAC;gBAC3B,WAAW,aAAa,OAAO;gBAC/B,OAAO;gBACP,QAAQ;oBAAC;oBAAG;iBAAG;gBACf,MAAM;YACR;YAEA,OAAO,OAAO,GAAG;YAEjB,cAAc;YACd,QAAQ,OAAO;yCAAC,CAAC;oBACf,IAAI,+NAAQ,CAAC,MAAM,CAAC;wBAClB,SAAS;qDAAC;gCACR,MAAM,KAAK,SAAS,aAAa,CAAC;gCAClC,GAAG,KAAK,CAAC,KAAK,GAAG;gCACjB,GAAG,KAAK,CAAC,MAAM,GAAG;gCAClB,GAAG,KAAK,CAAC,YAAY,GAAG;gCACxB,GAAG,KAAK,CAAC,eAAe,GAAG,SAAS,EAAE,IAAI;gCAC1C,GAAG,KAAK,CAAC,OAAO,GAAG;gCACnB,GAAG,KAAK,CAAC,MAAM,GAAG;gCAClB,OAAO;4BACT;yBAAC;oBACH,GACG,SAAS,CAAC;wBAAC,EAAE,GAAG;wBAAE,EAAE,GAAG;qBAAC,EACxB,QAAQ,CACP,IAAI,+NAAQ,CAAC,KAAK,GAAG,OAAO,CAC1B,AAAC,WAAuC,OAA7B,EAAE,IAAI,EAAC,wBAA6B,OAAP,EAAE,IAAI,IAGjD,KAAK,CAAC;gBACX;;YAEA;yCAAO;oBACL,IAAI,MAAM;gBACZ;;QACF;gCAAG,EAAE;IAEL,qBAAO,0PAAC;QAAI,KAAK;QAAc,WAAU;;;;;;AAC3C;GA1DwB;KAAA","debugId":null}}]
}