{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///Users/htanphuc/Documents/GitHub/iwts-bloom-watch/frontend/src/app/BloomingMap.js"],"sourcesContent":["\"use client\";\nimport { useEffect, useRef } from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport MapboxGeocoder from \"@mapbox/mapbox-gl-geocoder\";\nimport \"./map.css\";\n\n// ⚠️ Replace this with your actual Mapbox access token\nmapboxgl.accessToken = process.env.NEXT_PUBLIC_MAPBOX_TOKEN;\nfunction BloomingMap() {\n  const mapContainer = useRef(null);\n  const mapRef = useRef(null);\n\n  // Example NDVI data\n  const regions = [\n    { id: 1, name: \"Tokyo\", lat: 35.6895, lng: 139.6917, ndvi: 0.75 },\n    { id: 2, name: \"Paris\", lat: 48.8566, lng: 2.3522, ndvi: 0.55 },\n    { id: 3, name: \"New York\", lat: 40.7128, lng: -74.006, ndvi: 0.3 },\n  ];\n\n  const getColor = (ndvi) => {\n    if (ndvi > 0.7) return \"#22c55e\"; // green\n    if (ndvi > 0.5) return \"#eab308\"; // yellow\n    return \"#ef4444\"; // red\n  };\n\n  useEffect(() => {\n    if (mapRef.current || !mapContainer.current) return;\n\n    const map = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: \"mapbox://styles/mapbox/light-v11\",\n      center: [0, 20],\n      zoom: 1.5,\n    });\n\n    mapRef.current = map;\n\n    mapRef.current.addControl(\n      new MapboxGeocoder({\n        accessToken: mapboxgl.accessToken,\n        useBrowserFocus: true,\n        mapboxgl: mapboxgl,\n      }),\n      \"top-left\"\n    );\n\n    // Add markers\n    regions.forEach((r) => {\n      new mapboxgl.Marker({\n        element: (() => {\n          const el = document.createElement(\"div\");\n          el.style.width = \"20px\";\n          el.style.height = \"20px\";\n          el.style.borderRadius = \"50%\";\n          el.style.backgroundColor = getColor(r.ndvi);\n          el.style.opacity = \"0.6\";\n          el.style.border = \"2px solid white\";\n          return el;\n        })(),\n      })\n        .setLngLat([r.lng, r.lat])\n        .setPopup(\n          new mapboxgl.Popup().setHTML(\n            `<strong>${r.name}</strong><br/>NDVI: ${r.ndvi}`\n          )\n        )\n        .addTo(map);\n    });\n\n    return () => {\n      mapRef.current.remove();\n    };\n  }, []);\n\n  return (\n    <div ref={mapContainer} className=\"w-full h-screen\"/>\n  );\n}\n\nexport default BloomingMap;\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAHA;;;;;;AAMA,uDAAuD;AACvD,4NAAQ,CAAC,WAAW;AACpB,SAAS;IACP,MAAM,eAAe,IAAA,4QAAM,EAAC;IAC5B,MAAM,SAAS,IAAA,4QAAM,EAAC;IAEtB,oBAAoB;IACpB,MAAM,UAAU;QACd;YAAE,IAAI;YAAG,MAAM;YAAS,KAAK;YAAS,KAAK;YAAU,MAAM;QAAK;QAChE;YAAE,IAAI;YAAG,MAAM;YAAS,KAAK;YAAS,KAAK;YAAQ,MAAM;QAAK;QAC9D;YAAE,IAAI;YAAG,MAAM;YAAY,KAAK;YAAS,KAAK,CAAC;YAAQ,MAAM;QAAI;KAClE;IAED,MAAM,WAAW,CAAC;QAChB,IAAI,OAAO,KAAK,OAAO,WAAW,QAAQ;QAC1C,IAAI,OAAO,KAAK,OAAO,WAAW,SAAS;QAC3C,OAAO,WAAW,MAAM;IAC1B;IAEA,IAAA,+QAAS,EAAC;QACR,IAAI,OAAO,OAAO,IAAI,CAAC,aAAa,OAAO,EAAE;QAE7C,MAAM,MAAM,IAAI,4NAAQ,CAAC,GAAG,CAAC;YAC3B,WAAW,aAAa,OAAO;YAC/B,OAAO;YACP,QAAQ;gBAAC;gBAAG;aAAG;YACf,MAAM;QACR;QAEA,OAAO,OAAO,GAAG;QAEjB,OAAO,OAAO,CAAC,UAAU,CACvB,IAAI,4OAAc,CAAC;YACjB,aAAa,4NAAQ,CAAC,WAAW;YACjC,iBAAiB;YACjB,UAAU,4NAAQ;QACpB,IACA;QAGF,cAAc;QACd,QAAQ,OAAO,CAAC,CAAC;YACf,IAAI,4NAAQ,CAAC,MAAM,CAAC;gBAClB,SAAS,CAAC;oBACR,MAAM,KAAK,SAAS,aAAa,CAAC;oBAClC,GAAG,KAAK,CAAC,KAAK,GAAG;oBACjB,GAAG,KAAK,CAAC,MAAM,GAAG;oBAClB,GAAG,KAAK,CAAC,YAAY,GAAG;oBACxB,GAAG,KAAK,CAAC,eAAe,GAAG,SAAS,EAAE,IAAI;oBAC1C,GAAG,KAAK,CAAC,OAAO,GAAG;oBACnB,GAAG,KAAK,CAAC,MAAM,GAAG;oBAClB,OAAO;gBACT,CAAC;YACH,GACG,SAAS,CAAC;gBAAC,EAAE,GAAG;gBAAE,EAAE,GAAG;aAAC,EACxB,QAAQ,CACP,IAAI,4NAAQ,CAAC,KAAK,GAAG,OAAO,CAC1B,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,oBAAoB,EAAE,EAAE,IAAI,EAAE,GAGnD,KAAK,CAAC;QACX;QAEA,OAAO;YACL,OAAO,OAAO,CAAC,MAAM;QACvB;IACF,GAAG,EAAE;IAEL,qBACE,2SAAC;QAAI,KAAK;QAAc,WAAU;;;;;;AAEtC;uCAEe","debugId":null}}]
}